<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="みりんてゃと対戦するダブルソリティアゲーム。クラシックなKlondikeソリティアをAIキャラクターみりんてゃと対戦できます。">
    <meta name="keywords" content="ソリティア, カードゲーム, みりんてゃ, 対戦ゲーム, Klondike, ソロゲーム">
    <meta name="author" content="みりんてゃファン">
    <meta property="og:title" content="みりんてゃソリティア - AIキャラクターと対戦するソリティアゲーム">
    <meta property="og:description" content="みりんてゃと対戦するダブルソリティアゲーム。クラシックなKlondikeソリティアをAIキャラクターみりんてゃと対戦できます。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mirintea-solitaire.vercel.app/">
    <meta property="og:image" content="https://mirintea-solitaire.vercel.app/mirintea/default.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="みりんてゃソリティア - AIキャラクターと対戦するソリティアゲーム">
    <meta name="twitter:description" content="みりんてゃと対戦するダブルソリティアゲーム。クラシックなKlondikeソリティアをAIキャラクターみりんてゃと対戦できます。">
    <meta name="twitter:image" content="https://mirintea-solitaire.vercel.app/mirintea/default.png">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <title>みりんてゃソリティア - AIキャラクターと対戦するソリティアゲーム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Player Name Modal -->
    <div id="nameModal" class="modal">
        <div class="modal-content">
            <h2>きみの名前を教えてね♡</h2>
            <input type="text" id="playerName" placeholder="きみ" maxlength="10">
            <button id="startButton">開始するよ！</button>
            <button id="rulesButton" class="rules-button">ルール説明を見る</button>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rulesModal" class="modal hidden">
        <div class="modal-content rules-modal">
            <span class="close-btn" id="closeRulesBtn">×</span>
            <h2>みりんてゃソリティアのルール♡</h2>
            <div class="rules-content">
                <h3>基本ルール</h3>
                <p>クラシックなKlondikeソリティアです！<br>すべてのカードをスート（♥♦♣♠）ごとにA→Kの順に組札に並べたらクリア！</p>
                
                <h3>勝利条件</h3>
                <p>先に4つの組札を全部完成させた方が勝ち！<br>みりんてゃに負けたら…きみをぎゅーってしちゃうよ？♡</p>
                
                <h3>山札（ストック）と廃棄札（ウェイスト）</h3>
                <p>・山札をクリック／タップで1枚ずつめくるよ<br>
                ・廃棄札に出たカードは場札や組札に移動できる<br>
                <strong>★山札が空っぽになったら自動で廃棄札を全部集めてシャッフル！</strong><br>
                （もう昔みたいに手動で戻さなくていいんだよ～！）</p>
                
                <h3>場札（タブロー）</h3>
                <ul>
                    <li>赤と黒を交互に、数字は大きい→小さい順に重ねられる</li>
                    <li>まとめて移動もできるよ</li>
                    <li>空いた列にはKしか置けない</li>
                    <li>裏向きカードは動かすと自動で表になる</li>
                </ul>
                
                <h3>組札（ファウンデーション）</h3>
                <p>Aから始めて同じマークで順番に重ねていくよ<br>（Aの上に2、2の上に3…Kまで）</p>
                
                <h3>操作方法</h3>
                <ul>
                    <li>PC：クリックで選択 → 移動先クリック / ドラッグ＆ドロップ</li>
                    <li>スマホ：タップで選択 → 移動先タップ / 長押しドラッグ</li>
                    <li>ダブルタップでスマート移動もできるよ！</li>
                </ul>
                
                <h3>重要ポイント</h3>
                <p>プレイヤーとみりんてゃは<strong>完全に独立</strong>してるから、<br>
                きみとみりんてゃの山札・廃棄札はもう連動しません！<br>
                お互い自分のペースでガチ対戦だよ～！</p>
            </div>
            <button id="closeRulesButton">わかった！閉じる♡</button>
        </div>
    </div>

    <!-- Game Container -->
    <div class="game-container">
        <!-- Player Side -->
        <div class="player-side">
            <h2 id="playerNameDisplay">きみ</h2>
            <div class="game-board" id="playerBoard">
                <!-- 上段：組札4つだけにする -->
                <div class="top-row">
                    <div class="foundations">
                        <div class="foundation" id="player-foundation-0"></div>
                        <div class="foundation" id="player-foundation-1"></div>
                        <div class="foundation" id="player-foundation-2"></div>
                        <div class="foundation" id="player-foundation-3"></div>
                    </div>
                </div>
        
                <!-- 中段：場札7列 -->
                <div class="tableau">
                    <div class="tableau-column" id="player-tableau-0"></div>
                    <div class="tableau-column" id="player-tableau-1"></div>
                    <div class="tableau-column" id="player-tableau-2"></div>
                    <div class="tableau-column" id="player-tableau-3"></div>
                    <div class="tableau-column" id="player-tableau-4"></div>
                    <div class="tableau-column" id="player-tableau-5"></div>
                    <div class="tableau-column" id="player-tableau-6"></div>
                </div>
        
                <!-- ★追加！下段：ストックと廃棄札 -->
                <div class="bottom-controls">
                    <div class="stock" id="player-stock"></div>
                    <div class="waste" id="player-waste"></div>
                </div>
            </div>
        </div>
        
        <!-- Mirintea Side (同じように変更) -->
        <div class="mirintea-side">
            <h2>みりんてゃ</h2>
            <div class="game-board" id="mirinteaBoard">
                <!-- 上段 -->
                <div class="top-row">
                    <div class="foundations">
                        <div class="foundation" id="mirintea-foundation-0"></div>
                        <div class="foundation" id="mirintea-foundation-1"></div>
                        <div class="foundation" id="mirintea-foundation-2"></div>
                        <div class="foundation" id="mirintea-foundation-3"></div>
                    </div>
                </div>
        
                <!-- 中段 -->
                <div class="tableau">
                    <div class="tableau-column" id="mirintea-tableau-0"></div>
                    <div class="tableau-column" id="mirintea-tableau-1"></div>
                    <div class="tableau-column" id="mirintea-tableau-2"></div>
                    <div class="tableau-column" id="mirintea-tableau-3"></div>
                    <div class="tableau-column" id="mirintea-tableau-4"></div>
                    <div class="tableau-column" id="mirintea-tableau-5"></div>
                    <div class="tableau-column" id="mirintea-tableau-6"></div>
                </div>
        
                <!-- ★追加！下段 -->
                <div class="bottom-controls">
                    <div class="stock" id="mirintea-stock"></div>
                    <div class="waste" id="mirintea-waste"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mirintea Character Window -->
    <div class="character-window" id="mirinteaWindow">
        <div class="character-header drag-handle" id="mirinteaHeader">
            <span>みりんてゃ</span>
            <span class="close-btn" id="closeBtn">×</span>
        </div>
        <div class="character-content">
            <img id="mirinteaImage" src="/mirintea/default.png" alt="みりんてゃ">
            <div class="dialogue-box">
                <p id="mirinteaDialogue">ねぇ、きみ？今日こそみりんてゃが勝つから覚悟してね♡</p>
            </div>
        </div>
    </div>

    <!-- Win/Lose Overlay -->
    <div id="gameOverlay" class="overlay hidden">
        <div class="overlay-content">
            <img id="resultImage" src="/mirintea/win.png" alt="結果">
            <p id="resultText">きゃはっ♡ みりんてゃの勝ちだよ～！ぎゅーってしてあげるね！</p>
            <button id="restartButton">もう一度対戦する！</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>